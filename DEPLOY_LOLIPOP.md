# ロリポップサーバーへのデプロイ（アップロード）手順

今回のシステムは「SQLite」を使用しているため、特別な設定は不要で、ファイルを正しい位置にアップロードするだけで動作します。

## 1. 必要なファイル・フォルダ
アップロードが必要なのは以下の2つのフォルダです。

1. **`public_html` フォルダの中身すべて**
   - サイトの表示用ファイル（`.php`, `.css`, 画像など）が入っています。
2. **`db` フォルダ**
   - データベース本体（`sanyu_roof.sqlite`）が入っています。

## 2. フォルダ構成のルール
セキュリティのため、データベースファイルは「Webから直接見えない場所」に置くのが鉄則です。
ロリポップのFTPサーバーに接続すると、一番上に各ドメイン用のフォルダが見えるはずです。以下のように配置してください。

```text
/ (ルートディレクトリ)
  ├── db/                  <-- 【重要】新規作成してアップロード
  │    └── sanyu_roof.sqlite
  │
  └── あなたの公開フォルダ/  (例: web または domain.com)
       ├── index.php       <-- public_htmlの中身をここにアップロード
       ├── contact.php
       ├── admin/
       ├── assets/
       └── config/
```

## 3. config.php のパス調整

`public_html/config/config.php` は、データベースの場所を探しに行きます。
もしアップロード後に「Database Connection Failed」と表示される場合は、フォルダの深さが合っているか確認してください。

現在の設定：
```php
$db_path = dirname(__DIR__, 2) . '/db/sanyu_roof.sqlite';
```
これは、「**自分のいる場所 (`config/`) から2つ上の階層にある `db` フォルダの中**」という意味です。
上記の「2. フォルダ構成のルール」通りに配置すれば、この設定のままで動きます。

## 4. パーミッション（権限）の設定

アップロード後、データベースファイルへの書き込み権限が必要です（これがないと施工事例の追加やお問い合わせの保存ができません）。

FTPソフトで以下の権限（パーミッション）を設定してください：

- **`db` フォルダ**: `705` または `755` または `777` (ロリポップの仕様による)
- **`sanyu_roof.sqlite` ファイル**: `604` または `644` または `666` (書き込み可能にする)
- **`assets/img/uploads` フォルダ**: `755` または `777` (画像のアップロード用)

※ロリポップの場合、PHPは所有者権限で動くことが多いので、標準の `604` や `705` で動く場合もありますが、エラーが出る場合は `書き込み` 権限を追加してください。

## 5. 完了確認
サイトにアクセスし、以下の動作を確認してください。
- トップページの「施工事例」が表示されているか
- 管理画面 (`/admin/login.php`) にログインできるか (admin / password123)
